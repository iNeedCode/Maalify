%h1
  = t('budget.receipts')

%table#all-receipts-table.table.table-striped.table-bordered.table-hover.table-condensed{"data-source" => receipts_all_url(format: "json")}
  %thead
    %tr
      %th= t('member.full_name')
      %th= t('receipt.id')
      %th= t('receipt.date')
      %th= t('receipt.total')
      %th
      %th
      %th

  %tbody
    -#- @receipts.each do |receipt|
      %tr
        %td= link_to receipt.member.full_name, member_path(receipt.member_id)
        %td= link_to receipt.receipt_id, member_receipt_path(receipt.member_id, receipt.id)
        %td= I18n.l(receipt.date, format: :default)
        %td
          = number_to_currency receipt.total, locale: :de
          %br
          - receipt.items.each do |ri|
            %small
              = "#{ri.donation.name}: "
              = number_to_currency ri.amount, locale: :de
            %br
        %td
          =link_to member_receipt_path(receipt.member_id, receipt.id), :title => "#{t('table.show')}" do
            %span.glyphicon.glyphicon-search
        %td
          = link_to edit_member_receipt_path(receipt.member_id, receipt.id), :title => "#{t('table.edit')}" do
            %span.glyphicon.glyphicon-edit
        %td
          = link_to member_receipt_path(receipt.member_id, receipt.id), :method => :delete, :data => { :confirm => 'Are you sure?' }, :title => "#{t('table.delete')}" do
            %span.glyphicon.glyphicon-trash.color-red
